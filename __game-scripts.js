var RuletaApiService=pc.createScript("ruletaApiService");RuletaApiService.prototype.baseURL="https://seguroganas.com:9095",RuletaApiService.prototype.colectar=async function(e,t){if(!navigator.onLine)return{id:-2,mensaje:"No tienes conexión a internet"};{const i=`${this.baseURL}/api/casino/laruleta/recolectar-premio/${e}`;try{const e=await this.hacerPeticion(i,"GET",t,null);return e?.id?{id:e.id}:{id:0,mensaje:"Algo salio mal al colectar, intentelo de nuevo"}}catch(e){return{id:-1,mensaje:"Algo salio mal al colectar, intentelo de nuevo"}}}},RuletaApiService.prototype.validarPosicion=async function(e,t){if(!navigator.onLine)return"No tienes conexión a internet";{const i=`${this.baseURL}/api/casino/laruleta/validar-posicion/${e}`;try{const e=await this.hacerPeticion(i,"POST",t,null);return null!=e?.combinacion_actual?{id:1,casilla:e?.casilla}:{id:0,casilla:e?.casilla}}catch(e){return"Algo salio mal al girar, intentelo de nuevo"}}},RuletaApiService.prototype.generarSorteo=async function(e,t){if(!navigator.onLine)return{idboleto:-1,mensaje:"No tienes conexión a internet"};{const i=`${this.baseURL}/api/casino/laruleta/nuevo-sorteo`;try{const a=await this.hacerPeticion(i,"POST",e,t);return 0!==a?.id?{idBoleto:a.id,combinacionServidor:a.combinacionServidor,tablaPremiacion:a.lstPremiacion16,idTipoSaldo:a.id_saldo_origen}:{idBoleto:0,mensaje:a.mensaje}}catch(e){return{idboleto:-1,mensaje:"Servidor ocupado intente de nuevo mas tarde"}}}},RuletaApiService.prototype.recuperarJuego=async function(e){const t=`${this.baseURL}/api/casinos/plinko/reanudarjuego/${e}`;try{const e=await this.hacerPeticion(t,"GET",null,null);if(e)return{boletoPendiente:e.boletoPendiente,tablasPremiacion:e.tablasPremiacion};throw error}catch(e){}},RuletaApiService.prototype.hacerPeticion=async function(e,t,i=null,a=null){const n=new Headers;n.append("Content-Type","application/json"),i&&n.append("Authorization",`Bearer ${i}`);const o={method:t,headers:n};a&&(o.body=JSON.stringify(a));try{const t=await fetch(e,o),i=await t.json();return t.ok||this.enviarDatosFlutter({id:-1,statusCode:t.status,statusText:t.statusText,error:i}),i}catch(e){throw e}},RuletaApiService.prototype.enviarDatosFlutter=function(e){window.parent.postMessage(JSON.stringify(e),"*")};var ConsultaRecuperado;(ConsultaRecuperado=pc.createScript("consultaRecuperado")).prototype.initialize=function(){this.apiService=this.entity?.script?.ruletaApiService?this.entity.script.ruletaApiService:console.error("Los servicios no fueron cargados, por favor recargue el juego"),this.recuperarJuego()},ConsultaRecuperado.prototype.update=function(e){},ConsultaRecuperado.prototype.recuperarJuego=async function(){let e=await this.apiService.recuperarJuego(80);if(e&&(this.tablasPremiacion=e.tablasPremiacion,e.boletoPendiente)){this.idBoleto=e.boletoPendiente.id,this.idSaldoOrigen=e.boletoPendiente.id_saldo_origen,this.valorApostado=e.boletoPendiente.valor_apostado,this.premio=e.boletoPendiente.valor_ganado,this.lstIndices=e.boletoPendiente.combinacionServidor.substring(e.boletoPendiente.combinacionServidor.indexOf("[")+1,e.boletoPendiente.combinacionServidor.indexOf("]")).split(",").map(Number);let i=JSON.parse(e.boletoPendiente.combinacion_actual.replace(/(\w+):/g,'"$1":'));this.filas=i.filas,this.pelotas=i.pelotas,this.riesgo=i.riesgo,this.lstPremios=[];for(let e=0;e<this.lstIndices.length;e++)this.lstPremios.push(this.tablasPremiacion["premios"+this.riesgo][this.filas-8][this.lstIndices[e]])}},(ConsultaRecuperado=pc.createScript("consultaRecuperado")).prototype.initialize=function(){this.apiService=this.entity?.script?.ruletaApiService?this.entity.script.ruletaApiService:console.error("Los servicios no fueron cargados,por favor recargue el juego"),this.recuperarJuego()},ConsultaRecuperado.prototype.update=function(e){},ConsultaRecuperado.prototype.recuperarJuego=async function(){let e=await this.apiService.recuperarJuego(80);if(e&&(this.tablasPremiacion=e.tablasPremiacion,e.boletoPendiente)){this.idBoleto=e.boletoPendiente.id,this.idSaldoOrigen=e.boletoPendiente.id_saldo_origen,this.valorApostado=e.boletoPendiente.valor_apostado,this.premio=e.boletoPendiente.valor_ganado,this.lstIndices=e.boletoPendiente.combinacionServidor.substring(e.boletoPendiente.combinacionServidor.indexOf("[")+1,e.boletoPendiente.combinacionServidor.indexOf("]")).split(",").map(Number);let i=JSON.parse(e.boletoPendiente.combinacion_actual.replace(/(\w+):/g,'"$1":'));this.filas=i.filas,this.pelotas=i.pelotas,this.riesgo=i.riesgo,this.lstPremios=[];for(let e=0;e<this.lstIndices.length;e++)this.lstPremios.push(this.tablasPremiacion["premios"+this.riesgo][this.filas-8][this.lstIndices[e]])}};